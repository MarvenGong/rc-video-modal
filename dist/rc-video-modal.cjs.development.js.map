{"version":3,"file":"rc-video-modal.cjs.development.js","sources":["../src/index.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport './style.less';\nimport ReactDOM from 'react-dom';\nimport { useRef, useState } from 'react';\nexport interface IRcVideoModal extends React.VideoHTMLAttributes<HTMLVideoElement> {\n  title?: string;\n  width?: number | string;\n  onClose?: () => void;\n  children: React.ReactNode;\n  src: string;\n  autoPlay?: boolean;\n  controls?: boolean;\n  loop?: boolean;\n  muted?: boolean;\n  showClose?: boolean;\n  closeOnClickMask?: boolean;\n}\n\nconst VideoModal = (props: IRcVideoModal) => {\n  const {\n    title = '视频',\n    width = 800,\n    src,\n    autoPlay = false,\n    controls = false,\n    loop = false,\n    muted = false,\n    closeOnClickMask = true,\n    showClose = true,\n    onClose,\n    ...otherProps\n  } = props;\n  const videoRef = useRef(null);\n  const [visible, setVisible] = useState(false);\n  const [show, setShow] = useState(false);\n  const handleClose = () => {\n    setShow(false);\n    setTimeout(() => {\n      setVisible(false);\n    }, 300);\n    onClose?.();\n  }\n  const renderModal = () => {\n    return <>\n      {visible && <>\n        <div className={`rc-vmodal__mask ${show ? 'visible' : ''}`}\n          onClick={() => closeOnClickMask && handleClose()}></div>\n        <div className={`rc-vmodal__dialog ${show ? 'visible' : ''}`}\n          style={{\n            width,\n          }}>\n          <h3>\n            {title}\n            {showClose && <button onClick={() => handleClose()} className='close'></button>}\n          </h3>\n          <div className='video-area'>\n            <video\n              ref={videoRef}\n              {...otherProps}\n              autoPlay={autoPlay}\n              loop={loop}\n              controls={controls}\n              muted={muted}\n              preload=\"metadata\"\n              src={src}></video>\n          </div>\n        </div>\n      </>}\n    </>;\n  };\n  return <>\n    {ReactDOM.createPortal(renderModal(), document.body)}\n    {React.cloneElement(props.children as React.ReactElement, {\n      onClick: () => {\n        setVisible(true);\n        setTimeout(() => {\n          setShow(true);\n        }, 100);\n      },\n    })}\n  </>;\n};\nexport default VideoModal;\n"],"names":["VideoModal","props","_props$title","title","_props$width","width","src","_props$autoPlay","autoPlay","_props$controls","controls","_props$loop","loop","_props$muted","muted","_props$closeOnClickMa","closeOnClickMask","_props$showClose","showClose","onClose","otherProps","_objectWithoutPropertiesLoose","_excluded","videoRef","useRef","_useState","useState","visible","setVisible","_useState2","show","setShow","handleClose","setTimeout","renderModal","React","className","onClick","style","ref","preload","ReactDOM","createPortal","document","body","children"],"mappings":"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"}