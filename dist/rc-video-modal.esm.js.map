{"version":3,"file":"rc-video-modal.esm.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import * as React from 'react';\n\nimport './style.less';\nimport ReactDOM from 'react-dom';\nimport { useState } from 'react';\nexport interface IRcVideoModal extends React.VideoHTMLAttributes<HTMLVideoElement> {\n  title?: string;\n  width?: number | string;\n  onClose?: () => void;\n  children: React.ReactNode;\n  src: string;\n  autoPlay?: boolean;\n  controls?: boolean;\n  loop?: boolean;\n  muted?: boolean;\n  showClose?: boolean;\n  closeOnClickMask?: boolean;\n}\n\nconst VideoModal = (props: IRcVideoModal) => {\n  const {\n    title = '视频',\n    width = 800,\n    src,\n    autoPlay = false,\n    controls = false,\n    loop = false,\n    muted = false,\n    closeOnClickMask = true,\n    showClose = true,\n    onClose,\n    ...otherProps\n  } = props;\n  const [visible, setVisible] = useState(false);\n  const [show, setShow] = useState(false);\n  const handleClose = () => {\n    setShow(false);\n    setTimeout(() => {\n      setVisible(false);\n    }, 300);\n    onClose?.();\n  }\n  const renderModal = () => {\n    return <>\n      {visible && <>\n        <div className={`rc-vmodal__mask ${show ? 'visible' : ''}`}\n          onClick={() => closeOnClickMask && handleClose()}></div>\n        <div className={`rc-vmodal__dialog ${show ? 'visible' : ''}`}\n          style={{\n            width,\n          }}>\n          <h3>\n            {title}\n            {showClose && <button onClick={() => handleClose()} className='close'></button>}\n          </h3>\n          <div className='video-area'>\n            <video\n              {...otherProps}\n              autoPlay={autoPlay}\n              loop={loop}\n              controls={controls}\n              muted={muted}\n              preload=\"metadata\"\n              src={src}></video>\n          </div>\n        </div>\n      </>}\n    </>;\n  };\n  return <>\n    {ReactDOM.createPortal(renderModal(), document.body)}\n    {React.cloneElement(props.children as React.ReactElement, {\n      onClick: () => {\n        setVisible(true);\n        setTimeout(() => {\n          setShow(true);\n        }, 100);\n      },\n    })}\n  </>;\n};\nexport default VideoModal;\n"],"names":["VideoModal","props","_props$title","title","_props$width","width","src","_props$autoPlay","autoPlay","_props$controls","controls","_props$loop","loop","_props$muted","muted","_props$closeOnClickMa","closeOnClickMask","_props$showClose","showClose","onClose","otherProps","_objectWithoutPropertiesLoose","_excluded","_useState","useState","visible","setVisible","_useState2","show","setShow","handleClose","setTimeout","renderModal","React","className","onClick","style","preload","ReactDOM","createPortal","document","body","children"],"mappings":";;;;;;;;;;;;;;;;AAAA,SAAS,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE;AAC/B,EAAE,KAAK,GAAG,KAAK,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC;AACjC,EAAE,IAAI,QAAQ,GAAG,GAAG,CAAC,QAAQ,CAAC;AAC9B;AACA,EAAE,IAAI,CAAC,GAAG,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE,EAAE,OAAO,EAAE;AAC1D;AACA,EAAE,IAAI,IAAI,GAAG,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AACvE,EAAE,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;AAC9C,EAAE,KAAK,CAAC,IAAI,GAAG,UAAU,CAAC;AAC1B;AACA,EAAE,IAAI,QAAQ,KAAK,KAAK,EAAE;AAC1B,IAAI,IAAI,IAAI,CAAC,UAAU,EAAE;AACzB,MAAM,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;AAChD,KAAK,MAAM;AACX,MAAM,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AAC9B,KAAK;AACL,GAAG,MAAM;AACT,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AAC5B,GAAG;AACH;AACA,EAAE,IAAI,KAAK,CAAC,UAAU,EAAE;AACxB,IAAI,KAAK,CAAC,UAAU,CAAC,OAAO,GAAG,GAAG,CAAC;AACnC,GAAG,MAAM;AACT,IAAI,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC;AACpD,GAAG;AACH;;;;;;ACzBA,AAmBA,IAAMA,UAAU,GAAG,SAAbA,UAAUA,CAAIC,KAAoB;EACtC,IAAAC,YAAA,GAYID,KAAK,CAXPE,KAAK;IAALA,KAAK,GAAAD,YAAA,cAAG,IAAI,GAAAA,YAAA;IAAAE,YAAA,GAWVH,KAAK,CAVPI,KAAK;IAALA,KAAK,GAAAD,YAAA,cAAG,GAAG,GAAAA,YAAA;IACXE,GAAG,GASDL,KAAK,CATPK,GAAG;IAAAC,eAAA,GASDN,KAAK,CARPO,QAAQ;IAARA,QAAQ,GAAAD,eAAA,cAAG,KAAK,GAAAA,eAAA;IAAAE,eAAA,GAQdR,KAAK,CAPPS,QAAQ;IAARA,QAAQ,GAAAD,eAAA,cAAG,KAAK,GAAAA,eAAA;IAAAE,WAAA,GAOdV,KAAK,CANPW,IAAI;IAAJA,IAAI,GAAAD,WAAA,cAAG,KAAK,GAAAA,WAAA;IAAAE,YAAA,GAMVZ,KAAK,CALPa,KAAK;IAALA,KAAK,GAAAD,YAAA,cAAG,KAAK,GAAAA,YAAA;IAAAE,qBAAA,GAKXd,KAAK,CAJPe,gBAAgB;IAAhBA,gBAAgB,GAAAD,qBAAA,cAAG,IAAI,GAAAA,qBAAA;IAAAE,gBAAA,GAIrBhB,KAAK,CAHPiB,SAAS;IAATA,SAAS,GAAAD,gBAAA,cAAG,IAAI,GAAAA,gBAAA;IAChBE,OAAO,GAELlB,KAAK,CAFPkB,OAAO;IACJC,UAAU,GAAAC,6BAAA,CACXpB,KAAK,EAAAqB,SAAA;EACT,IAAAC,SAAA,GAA8BC,QAAQ,CAAC,KAAK,CAAC;IAAtCC,OAAO,GAAAF,SAAA;IAAEG,UAAU,GAAAH,SAAA;EAC1B,IAAAI,UAAA,GAAwBH,QAAQ,CAAC,KAAK,CAAC;IAAhCI,IAAI,GAAAD,UAAA;IAAEE,OAAO,GAAAF,UAAA;EACpB,IAAMG,WAAW,GAAG,SAAdA,WAAWA;IACfD,OAAO,CAAC,KAAK,CAAC;IACdE,UAAU,CAAC;MACTL,UAAU,CAAC,KAAK,CAAC;KAClB,EAAE,GAAG,CAAC;IACPP,OAAO,YAAPA,OAAO,EAAI;GACZ;EACD,IAAMa,WAAW,GAAG,SAAdA,WAAWA;IACf,OAAOC,8BACJR,OAAO,IAAIQ,8BACVA;MAAKC,SAAS,wBAAqBN,IAAI,GAAG,SAAS,GAAG,EAAE,CAAE;MACxDO,OAAO,EAAE,SAAAA;QAAA,OAAMnB,gBAAgB,IAAIc,WAAW,EAAE;;MAAQ,EAC1DG;MAAKC,SAAS,0BAAuBN,IAAI,GAAG,SAAS,GAAG,EAAE,CAAE;MAC1DQ,KAAK,EAAE;QACL/B,KAAK,EAALA;;OAEF4B,0BACG9B,KAAK,EACLe,SAAS,IAAIe;MAAQE,OAAO,EAAE,SAAAA;QAAA,OAAML,WAAW,EAAE;;MAAEI,SAAS,EAAC;MAAiB,CAC5E,EACLD;MAAKC,SAAS,EAAC;OACbD,yCACMb,UAAU;MACdZ,QAAQ,EAAEA,QAAQ;MAClBI,IAAI,EAAEA,IAAI;MACVF,QAAQ,EAAEA,QAAQ;MAClBI,KAAK,EAAEA,KAAK;MACZuB,OAAO,EAAC,UAAU;MAClB/B,GAAG,EAAEA;OAAa,CAChB,CACF,CACL,CACF;GACJ;EACD,OAAO2B,8BACJK,QAAQ,CAACC,YAAY,CAACP,WAAW,EAAE,EAAEQ,QAAQ,CAACC,IAAI,CAAC,EACnDR,YAAkB,CAAChC,KAAK,CAACyC,QAA8B,EAAE;IACxDP,OAAO,EAAE,SAAAA;MACPT,UAAU,CAAC,IAAI,CAAC;MAChBK,UAAU,CAAC;QACTF,OAAO,CAAC,IAAI,CAAC;OACd,EAAE,GAAG,CAAC;;GAEV,CAAC,CACD;AACL,CAAC;;;;"}