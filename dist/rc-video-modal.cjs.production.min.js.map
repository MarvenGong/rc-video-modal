{"version":3,"file":"rc-video-modal.cjs.production.min.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import * as React from 'react';\n\nimport './style.less';\nimport ReactDOM from 'react-dom';\nimport { useRef, useState } from 'react';\nexport interface IRcVideoModal extends React.VideoHTMLAttributes<HTMLVideoElement> {\n  title?: string;\n  width?: number | string;\n  onClose?: () => void;\n  children: React.ReactNode;\n  src: string;\n  autoPlay?: boolean;\n  controls?: boolean;\n  loop?: boolean;\n  muted?: boolean;\n  showClose?: boolean;\n  closeOnClickMask?: boolean;\n}\n\nconst VideoModal = (props: IRcVideoModal) => {\n  const {\n    title = '视频',\n    width = 800,\n    src,\n    autoPlay = false,\n    controls = false,\n    loop = false,\n    muted = false,\n    closeOnClickMask = true,\n    showClose = true,\n    onClose,\n    ...otherProps\n  } = props;\n  const videoRef = useRef(null);\n  const [visible, setVisible] = useState(false);\n  const [show, setShow] = useState(false);\n  const handleClose = () => {\n    setShow(false);\n    setTimeout(() => {\n      setVisible(false);\n    }, 300);\n    onClose?.();\n  }\n  const renderModal = () => {\n    return <>\n      {visible && <>\n        <div className={`rc-vmodal__mask ${show ? 'visible' : ''}`}\n          onClick={() => closeOnClickMask && handleClose()}></div>\n        <div className={`rc-vmodal__dialog ${show ? 'visible' : ''}`}\n          style={{\n            width,\n          }}>\n          <h3>\n            {title}\n            {showClose && <button onClick={() => handleClose()} className='close'></button>}\n          </h3>\n          <div className='video-area'>\n            <video\n              ref={videoRef}\n              {...otherProps}\n              autoPlay={autoPlay}\n              loop={loop}\n              controls={controls}\n              muted={muted}\n              preload=\"metadata\"\n              src={src}></video>\n          </div>\n        </div>\n      </>}\n    </>;\n  };\n  return <>\n    {ReactDOM.createPortal(renderModal(), document.body)}\n    {React.cloneElement(props.children as React.ReactElement, {\n      onClick: () => {\n        setVisible(true);\n        setTimeout(() => {\n          setShow(true);\n        }, 100);\n      },\n    })}\n  </>;\n};\nexport default VideoModal;\n"],"names":["css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","props","_props$title","title","_props$width","width","src","_props$autoPlay","autoPlay","_props$controls","controls","_props$loop","loop","_props$muted","muted","_props$closeOnClickMa","closeOnClickMask","_props$showClose","showClose","onClose","otherProps","_objectWithoutPropertiesLoose","_excluded","videoRef","useRef","_useState","useState","visible","setVisible","_useState2","show","setShow","handleClose","setTimeout","React","ReactDOM","createPortal","className","onClick","preload","body","children"],"mappings":"wKAAA,SAAqBA,EAAKC,QACX,IAARA,IAAiBA,EAAM,IAC5B,IAAIC,EAAWD,EAAIC,SAEnB,GAAgC,oBAAbC,SAAnB,CAEA,IAAIC,EAAOD,SAASC,MAAQD,SAASE,qBAAqB,QAAQ,GAC9DC,EAAQH,SAASI,cAAc,SACnCD,EAAME,KAAO,WAEI,QAAbN,GACEE,EAAKK,WACPL,EAAKM,aAAaJ,EAAOF,EAAKK,YAKhCL,EAAKO,YAAYL,GAGfA,EAAMM,WACRN,EAAMM,WAAWC,QAAUb,EAE3BM,EAAMK,YAAYR,SAASW,eAAed,klDCJ3B,SAACe,GAClB,IAAAC,EAYID,EAXFE,MAAAA,WAAKD,EAAG,KAAIA,EAAAE,EAWVH,EAVFI,MAAAA,WAAKD,EAAG,IAAGA,EACXE,EASEL,EATFK,IAAGC,EASDN,EARFO,SAAAA,WAAQD,GAAQA,EAAAE,EAQdR,EAPFS,SAAAA,WAAQD,GAAQA,EAAAE,EAOdV,EANFW,KAAAA,WAAID,GAAQA,EAAAE,EAMVZ,EALFa,MAAAA,WAAKD,GAAQA,EAAAE,EAKXd,EAJFe,iBAAAA,WAAgBD,GAAOA,EAAAE,EAIrBhB,EAHFiB,UAAAA,WAASD,GAAOA,EAChBE,EAEElB,EAFFkB,QACGC,oIAAUC,CACXpB,EAAKqB,GACHC,EAAWC,SAAO,MACxBC,EAA8BC,YAAS,GAAhCC,EAAOF,KAAEG,EAAUH,KAC1BI,EAAwBH,YAAS,GAA1BI,EAAID,KAAEE,EAAOF,KACdG,EAAc,WAClBD,GAAQ,GACRE,YAAW,WACTL,GAAW,KACV,WACHT,GAAAA,KA8BF,OAAOe,gCACJC,EAASC,aA5BHF,gCACJP,GAAWO,gCACVA,uBAAKG,8BAA8BP,EAAO,UAAY,IACpDQ,QAAS,WAAA,OAAMtB,GAAoBgB,OACrCE,uBAAKG,gCAAgCP,EAAO,UAAY,IACtDtC,MAAO,CACLa,MAAAA,IAEF6B,0BACG/B,EACAe,GAAagB,0BAAQI,QAAS,WAAA,OAAMN,KAAeK,UAAU,WAEhEH,uBAAKG,UAAU,cACbH,uCACE/C,IAAKoC,GACDH,GACJZ,SAAUA,EACVI,KAAMA,EACNF,SAAUA,EACVI,MAAOA,EACPyB,QAAQ,WACRjC,IAAKA,SAOuBjB,SAASmD,MAC9CN,eAAmBjC,EAAMwC,SAAgC,CACxDH,QAAS,WACPV,GAAW,GACXK,YAAW,WACTF,GAAQ,KACP"}